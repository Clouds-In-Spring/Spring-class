# Bean ë“±ë¡ ë©”íƒ€ì •ë³´ êµ¬ì„± ì „ëµ

#### 1. XML ë‹¨ë… ì‚¬ìš© â¡ ìš´ì˜ í™˜ê²½ì— ì í•©

* ëª¨ë“  beanì„ ëª…ì‹œì ìœ¼ë¡œ xmlíŒŒì¼ì— ë“±ë¡í•˜ëŠ” ë°©ë²•
* ëª¨ë“  beanì„ xmlì—ì„œ í™•ì¸í•  ìˆ˜ ìˆì§€ë§Œ beanì˜ ê°œìˆ˜ê°€ ë§ì•„ì§€ë©´ xmlíŒŒì¼ì„ ê´€ë¦¬í•˜ê¸° ë²ˆê±°ë¡œì›Œì§„ë‹¤
* í˜‘ì—…ì‹œ ê°™ì€ ì„¤ì • íŒŒì¼ì„ ê³µìœ í•´ì„œ ê°œë°œí•˜ë‹¤ë³´ë©´ ë™ì‹œ ìˆ˜ì •ìœ¼ë¡œ ì¸í•œ ì¶©ëŒì´ ìƒê¸¸ ìˆ˜ ìˆë‹¤
* DIì— í•„ìš”í•œ ì ì ˆí•œ setter ë©”ì„œë“œ ë˜ëŠ” constructorê°€ ì½”ë“œ ë‚´ì— ë°˜ë“œì‹œ ì¡´ì¬í•´ì•¼ í•œë‹¤
*  ê´€ë¦¬ì˜ í¸ì˜ì„±ì„ ìœ„í•´ ê°œë°œë³´ë‹¤ ìš´ì˜ì¤‘ì— ë§ì´ ì‚¬ìš©



#### 2. XMLê³¼ ë¹ˆ ìŠ¤ìºë‹(Bean Scanning)ì˜ í˜¼ìš©  â¡ ê°œë°œ í™˜ê²½ì— ì í•©

* Beanìœ¼ë¡œ ì‚¬ìš©ë  í´ë˜ìŠ¤ì— íŠ¹ë³„í•œ **ì–´ë…¸í…Œì´ì…˜ì„ ë¶€ì—¬**í•˜ë©´ í•´ë‹¹ **í´ë˜ìŠ¤ë¥¼ ìë™ìœ¼ë¡œ ì°¾ì•„ì„œ beanìœ¼ë¡œ ë“±ë¡**
* XML ë¬¸ì„œ ìƒì„±ê³¼ ê´€ë¦¬ì— ë”°ë¥¸ ìˆ˜ê³ ë¥¼ ëœì–´ì£¼ë©° ê°œë°œì†ë„ í–¥ìƒì‹œí‚¬ ìˆ˜ ìˆë‹¤
* ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ Bean êµ¬ì„±ê³¼ ì˜ì¡´ê´€ê³„ íŒŒì•…ì´ ì–´ë µë‹¤ëŠ” ë‹¨ì ì´ ìˆë‹¤



# Bean ë“±ë¡ ë° ì˜ì¡´ê´€ê³„ ì„¤ì • ì–´ë…¸í…Œì´ì…˜

#### Bean ë“±ë¡ ì–´ë…¸í…Œì´ì…˜

* @Component 

  : ì£¼ë¡œ ë§ì´ ì‚¬ìš©ë˜ëŠ” ì–´ë…¸í…Œì´ì…˜, \<bean>íƒœê·¸ì™€ ë™ì¼í•œ ì—­í• 

* @Repository

  : ì˜ì†ì„±ì„ ê°€ì§€ëŠ” íŒŒì¼, DBì ‘ì†ì„ ì§€ì›í•˜ëŠ” í´ë˜ìŠ¤ì¸ ê²½ìš° ì‚¬ìš©

* @Service

  : ë³µì¡í•œ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì„ ê°€ì§„ í´ë˜ìŠ¤ì— ì‚¬ìš©

* @Controller

  : ì›¹ì•±ì˜ ì›¹ìš”ì²­ê³¼ ì‘ë‹µì„ ì²˜ë¦¬í•˜ëŠ” í´ë˜ìŠ¤ì¸ ê²½ìš°

ğŸš¨ @Repository, @Service, @ControllerëŠ” íŠ¹ì •í•œ ìœ ìŠ¤ì¼€ì´ìŠ¤ë“¤ì— ëŒ€í•œ **@Componentì˜ êµ¬ì²´í™”ëœ í˜•íƒœ**



#### Bean ì˜ì¡´ê´€ê³„ ì£¼ì… ì–´ë…¸í…Œì´ì…˜

* @Autowired

  : ì •ë°€í•œ ì˜ì¡´ê´€ê³„ ì£¼ì…(DI)ì´ í•„ìš”í•œ ê²½ìš°ì— ìœ ìš©, \<property>, \<constructor-arg>íƒœê·¸ì™€ ë™ì¼í•œ ì—­í• 

  â¡ í•´ë‹¹í•˜ëŠ” beanì„ ì°¾ì•„ì˜¬ ë•Œ **Type**ìœ¼ë¡œ ì°¾ì•„ì™€ì„œ ì—°ê²°

* @Resource

  : ê¸°ëŠ¥ë©´ì—ì„œëŠ” @Autowiredì™€ ë™ì¼í•˜ë‚˜ í”„ë¡œí¼í‹°ì™€ setterë©”ì„œë“œì—ë§Œ ì ìš© ê°€ëŠ¥

  â¡ í•´ë‹¹í•˜ëŠ” beanì„ ì°¾ì•„ì˜¬ ë•Œ **Name**ìœ¼ë¡œ ì°¾ì•„ì™€ì„œ ì—°ê²°

* @Value

  : ë‹¨ìˆœí•œ ê°’ì„ ì£¼ì…í•  ë•Œ ì‚¬ìš©

  `@Value("Spring")` ì€ `<property .. value="Spring />"` ì™€ ë™ì¼í•œ ì—­í• ì„ í•œë‹¤

* @Qualifier

  : @Autowired ì–´ë…¸í…Œì´ì…˜ê³¼ ê°™ì´ ì‚¬ìš©ë¨

  â¡ @AutowiredëŠ” Typeìœ¼ë¡œ beanì„ ì°¾ëŠ”ë‹¤. ë™ì¼í•œ íƒ€ì…ì˜ bean ê°ì²´ê°€ ì—¬ëŸ¬ ê°œ ì¡´ì¬í•  ê²½ìš°, íŠ¹ì • beanì„ ì°¾ê¸° ìœ„í•´ì„œ @Qualifierë¥¼ ê°™ì´ ì‚¬ìš©í•œë‹¤



#### Component Scanì„ ì§€ì›í•˜ëŠ” íƒœê·¸

##### \<context:component-scan> íƒœê·¸

* @Componentë¥¼ í†µí•´ ìë™ìœ¼ë¡œ beanì„ ë“±ë¡í•˜ê³  @Autowiredë¡œ ì˜ì¡´ê´€ê³„ë¥¼ ì£¼ì…ë°›ëŠ” ì–´ë…¸í…Œì´ì…˜ì„ í´ë˜ìŠ¤ì—ì„œ ì„ ì–¸í•˜ì—¬ ì‚¬ìš©í–ˆì„ ê²½ìš°, **í•´ë‹¹ í´ë˜ìŠ¤ê°€ ìœ„ì¹˜í•œ íŠ¹ì • íŒ¨í‚¤ì§€ë¥¼ Scaní•˜ê¸° ìœ„í•œ ì„¤ì •**ì„ XMLì— í•´ì£¼ì–´ì•¼ í•¨

  `<context:component-scan base-package="myspring.di.annot" />`

* \<context:include-filter> íƒœê·¸ì™€ \<context:exclude-filter>íƒœê·¸ë¥¼ ê°™ì´ ì‚¬ìš©í•˜ë©´ ìë™ ìŠ¤ìº” ëŒ€ìƒì— í¬í•¨ì‹œí‚¬ í´ë˜ìŠ¤, ì œì™¸í•  í´ë˜ìŠ¤ë¥¼ êµ¬ì²´ì ìœ¼ë¡œ ëª…ì‹œí•  ìˆ˜ ìˆìŒ





##### StringPrinter.java

```java
package myspring.di.annot;

import org.springframework.stereotype.Component;

@Component("stringPrinter")	ğŸš¨ Component ì–´ë…¸í…Œì´ì…˜ ì„ ì–¸
public class StringPrinter implements Printer{
...
}
```



##### ConsolePrinter.java

```java
package myspring.di.annot;

import org.springframework.stereotype.Component;

@Component("consolePrinter")	ğŸš¨ Component ì–´ë…¸í…Œì´ì…˜ ì„ ì–¸	
public class ConsolePrinter implements Printer {
...
}

```



##### Hello.java

```java
package myspring.di.annot;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.beans.factory.annotation.Qualifier;
import org.springframework.beans.factory.annotation.Value;
import org.springframework.stereotype.Component;

@Component
public class Hello {
	@Value("Spring")
	private String name;
	
	@Autowired
	@Qualifier("stringPrinter")
	/* autowiredì˜ ê²½ìš° typeìœ¼ë¡œ beanì„ ì°¾ëŠ”ë‹¤
	 * Printer typeì—ëŠ” ConsolePrinterì™€ StringPrinter ë‘ ê°€ì§€ê°€ ìˆìœ¼ë¯€ë¡œ
	 * Qualifier ì–´ë…¸í…Œì´ì…˜ì„ í†µí•´ stringPrinterë¡œ ëª…ì‹œí•´ì£¼ì–´ì•¼ í•œë‹¤*/
	private Printer printer;
	
	/* ì–´ë…¸í…Œì´ì…˜ì„ ì´ìš©í•œ ê²½ìš° setter ë©”ì„œë“œëŠ” í•„ìš” ì—†ë‹¤
	 * ë”°ë¼ì„œ setNameê³¼ setPrinter ë©”ì„œë“œëŠ” ì‚­ì œ*/
	
	public String sayHello() {
		return "Hello!" + name;
	}
	
	public void print() {
		this.printer.print(sayHello());
	}
}
```



##### annot.xml

```xml
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xmlns:context="http://www.springframework.org/schema/context"
	xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.2.xsd
		http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.2.xsd">

	<context:component-scan base-package="myspring.di.annot"/>
</beans>
```



##### HelloBeanAnnotTest.java (Spring Testë¥¼ ì´ìš©)

```java
package myspring.di.annot.test;

import static org.junit.Assert.assertEquals;

import org.junit.Test;
import org.junit.runner.RunWith;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.context.ApplicationContext;
import org.springframework.test.context.ContextConfiguration;
import org.springframework.test.context.junit4.SpringJUnit4ClassRunner;

import myspring.di.annot.Hello;

@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration(locations = "classpath:config/annot.xml")
public class HelloBeanAnnotTest {
	
	@Autowired
	ApplicationContext context;
	
	@Test
	public void test() {
		// @Componentë¡œ ë“±ë¡í•œ beanë“¤ì€ í´ë˜ìŠ¤ëª…ì—ì„œ ì œì¼ ì• ë¬¸ìê°€ ì†Œë¬¸ìë¡œ ë³€ê²½ëœ í˜•íƒœë¡œ ë“±ë¡ë¨
		Hello hello = context.getBean("hello", Hello.class);
		assertEquals("Hello!Spring", hello.sayHello());
	}
}
```



# Property íŒŒì¼ì„ ì´ìš©í•œ ì„¤ì • ë°©ë²•

##### value.properties íŒŒì¼ì— ë‚´ìš© ì¶”ê°€

```properties
printer1=stringPrinter
printer2=consolePrinter 
```



##### Hello.java ìˆ˜ì •(ğŸš¨ Resource importì•ˆë  ë•Œ pom.xmlì— javax.annotation ì˜ì¡´ì„± ì¶”ê°€)

> 	<dependency>
> 	<groupId>javax.annotation</groupId>
> 	    <artifactId>javax.annotation-api</artifactId>
> 	    <version>1.3.1</version>
> 	</dependency>

```java
package myspring.di.annot;

import javax.annotation.*;

import org.springframework.beans.factory.annotation.Value;
import org.springframework.stereotype.Component;

@Component
public class Hello {
	@Value("${myname}")
	private String name;
	
	@Resource(name="${printer1}")
	private Printer printer;
	
	public String sayHello() {
		return "Hello!" + name;
	}
	
	public void print() {
		this.printer.print(sayHello());
	}
}
```



##### annot.xmlì— ì¶”ê°€

```
<context:property-placeholder location="classpath:config/value.properties"/>
```

