# 13강
>AOP의 개요와 용어<br>
AOP의 특징 및 구현 방식<br>
AspectJ와 Spring AOP 설치

<br><br>

## AOP의 개요와 용어
1. 핵심기능과 부가기능
    * 업무 로직을 포함하는 기능을 핵심 기능
    * 핵심기능을 도와주는 부가적인 기능을 부가기능
    * 핵심기능에서 부가기능을 분리해서 모듈화하는 것을 어렵다 -> AOP사용하자!
        
<br>

2. AOP(Aspect Oriented Programming)의 개요
    >핵심기능에서 부가기능을 분리. 분리한 부가기능을 애스펙트 라는 독특한 모듈형태로 만들어서 설계, 개발
    * OOP를 적용하여도 핵심기능에서 부가기능을 쉽게 분리된 모듈로 작성하기 어려운 문제점 해결해줌
    * 부가기능을 Aspect로 정의
    * 객체지향적인 가치를 지킬수 있도록 도와줌
            
<br>

3. 애스펙트(Aspect)
    >Advice + PointCut = Aspect
    * *Advice: 부가기능을 정의한 코드
    * *PointCut: 어드바이스를 어디에 적용할지 결정
    - 런타임 시에 필요한 위치에 동적으로 참여하게 할 수 있다
        
<br>

4. AOP 용어
    - 타겟(Target)
        - 핵심기능을 담고있는 모듈
        - 부가기능을 부여할 대상
    - 어드바이스(Advice)
        - 타겟에 제공할 부가기능을 담고 있는 모듈
    - 조인 포인트(Join Point)
        - 어드바이스가 적용될 수 있는 위치
        - 타겟 객체가 구현한 인터페이스의 모든 메서드는 조인포인트가 된다.
    - 포인트컷(Pointcut)
        - 타겟의 메서드를 선별하는 정규표현식
        - execution으로 시작하고 메서드의 Signature를 비교하는 방법을 이용
    - 애스펙트(Aspect)
        - AOP의 기본모듈
        - 어드바이스 + 포인트컷
        - 싱글톤 형태   
    - 어드바이저(Advisor)
        - 어드바이스 + 포인트컷
        - Spring AOP에서만 사용됨
    - 위빙(Weaving) 
        - 포인트컷에 의해서 결정된 타겟의 조인 포인트에 부가기능(어드바이스)를 삽입하는 과정을 말함
        - AOP가 핵심기능(타겟)의 코드에 영향을 주지 않으면서 필요한 부가기능(어드바이스)을 추가할 수 있도록 해줌


<br><br>

## AOP의 특징 및 구현 방식
1. Spring AOP의 특징
    - (1) Spring은 프록시(Proxy) 기반 AOP를 지원
        - Spring은 타겟 객체를 감싸고 있는 프록시를 만들어 제공한다
        - 타겟을 감싸는 프록시는 런타임시에 생성된다
        - 프록시는 어드바이스를 타겟객체에 적용하면서 생성되는 객체
    - (2) 프록시는 호출을 가로챈다
        - 전처리 어드바이스
            - 타겟 객체에 대한 호출을 가로챈 다음 어드바이스의 부가기능 로직을 먼저 수행하고 타겟의 핵심기능 로직을 호출 
        - 후처리 어드바이스
            - 핵심기능 로직 메서드 호출 후에 부가기능(어드바이스)을 수행하는 경우

    - (3) Spring AOP는 메서드 조인 포인트만 지원
        - 동적 프록시를 기반으로 AOP를 구현하므로 메서드 조인포인트만 지원.
        - 핵심기능(타겟)의 메서드가 호출되는 런타임 시점에만 부가기능(어드바이스)을 적용할 수 있다
        - 반면에 AspectJ와 같은 고급 AOP 프레임워크를 사용하면 다양한 작업에 부가기능 적용 가능

<br>

2. Spring AOP의 구현 방식
    - XML 기반의 Pojo 클래스를 이용한 AOP구현
        - 부가 기능을 제공하는 Advice 클래스 작성
        - XML 설정파일에 \<aop:config> 태그를 이용해서 애스펙트 설정(즉, 어드바이스와 포인트컷 설정)
    - @Aspect 어노테이션 이용
        - 애스펙트 클래스는 어드바이스를 구현하는 메서드와 포인트컷을 포함
        - XML 설정파일에 \<aop:aspectj-autoproxy />를 설정

<br><br>

## AspectJ와 Spring AOP 설치
1. AspectJ Runtime 라이브러리 설치
    - 1 ) http://mvnrepository.com
    - 2 ) aspectj runtime 검색
    - 3 ) pom.xml에 추가 
2. AspectJ Weaver 라이브러리 설치
    - 동일한 방법으로 설치
3. Spring AOP 라이브러리 설치
    - 동일한 방법으로 설치
4. AspectJ Runtime API 문서<br>
    http://www.eclipse.org/aspectj/doc/next/runtime-api/