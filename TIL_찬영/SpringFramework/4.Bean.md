## Bean 의존 관계 설정

Setter Injection : \<property> 태그

- Setter 메서드를 통해 의존관계가 있는 Bean을 주입하려면 \<property>태그를 사용
- ref 속성은 사용하면 Bean 이름을 이용해 주입할 Bean을 찾음
- value 속성은 단순 값 또는 Bean이 아닌 객체를 주입할 때 사용

```xml
<bean id="hello" class="mySpring.di.xml.Hello">
    <property name="name" value="Spring" />
    <property name="printer" ref="printer"></property>
</bean>
	
<bean id="printer" class="mySpring.di.xml.StringPrinter" />
```





Constructor Injection :  \<constuctor-arg> 태그

- Constructor를 통해 의존관계가 있는 Bean을 주입하려면 \<constuctor-arg>태그를 사용

- Constructor 주입방식은 생성자의 파라미터를 이용하기 때문에 한번에 여러 개의 객체를 주입가능

  - Setter Injection과의 차이점

- 생성자 주입을 위한 설정

  - index 지정

  ```xml
  <bean id="hello" class="myspring.di.xml.Hello">
      <constructor-arg index="0" value="Spring"/>
      <constructor-arg index="1" ref="printer"/>
  </bean>
  ```

  - 파라미터 이름 지정

  ```xml
  <bean id="hello" class="myspring.di.xml.Hello">
      <constructor-arg name="name" value="Spring"/>
      <constructor-arg name="printer" ref="printer"/>
  </bean>
  ```

  

## 프로퍼티(Property) 값 설정 방법

단순 값(문자열이나 숫자)의 주입(Injection)

- value 속성 사용

```xml
<property name="name" value="Spring" />
```





컬렉션(Collection) 타입의 값 주입(Injection)

- Spring은 List, Set, Map, Properties와 같은 컬렉션 타입을 XML로 작성해서 프로퍼티에 주입하는 방법을 제공

- List와 Set 타입

  - \<list> 또는 \<set> 태그와 \<value> 태그를 이용

  ```xml
  <property name="names">
      <list>
          <value>AOP</value>
          <value>Spring</value>
          <value>DI</value>
      </list>
  </property>
  ```

- Map 타입

  - \<map>과 \<entry>태그를 이용



## 프로퍼티(Property) 파일을 이용한 설정 방법

환경에 따라 자주 변경되는 내용의 분리

- XML의 Bean 설정 메타정보는 애플리케이션 구조가 바뀌지 않으면 자주 변경되지 않음

- 반면에 프로퍼티 값으로 제공되는 일부 설정정보 (ex-DataSource Bean이 사용하는 DB 연결정보)는

   애플리케이션이 동작하는 환경(개발, 테스트, 스테이징, 운영)에 따라서 자주 바뀔 수 있음

- 변경되는 이유와 시점이 다르다면 분리하는 것이 객체지향 설계의 기본 원칙

  - 설정에도 동일한 원칙 적용

- 환경에 따라 자주 변경될 수 있는 내용은 properties 파일로 분리하는 것이 가장 깔끔

- XML 처럼 복잡한 구성이 필요 없고 키와 값의 쌍(key=value)으로 구성



자주 변경되는 값들은 properties 파일에 넣어 분리

- 프로퍼티 파일로 분리한 정보는 **`${ }`** (프로퍼티 치환자)을 이용하여 설정

- ${ } 값을 치환해주는 기능은  \<context:property-placeholder>태그에 의해 자동으로 등록되는 

  PropertyPlaceHolderConfigurer Bean이 담당

```xml
<context:property-placeholder location="classpath:config/value.properties" />
	
<bean id="hello2" class="mySpring.di.xml.Hello">
    <constructor-arg index="0" value="${myname}"></constructor-arg>
    <constructor-arg index="1" ref="${mtprinter}"></constructor-arg>

    <property name="names">
        <list>
            <value>${value1}</value>
            <value>${value2}</value>
            <value>${value3}</value>
        </list>
    </property>
</bean>
```



